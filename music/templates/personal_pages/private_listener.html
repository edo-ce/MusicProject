{% extends 'base.html' %}
{% block title %}
    Listener Page
{% endblock %}
{% block content %}
<body class="text-center">
    <!--section class="container">
        <h1>My Library</h1>
        {% for elem, values in elems.items() %}
            <br>
            <table>
                <thead>My {{ elem }}</thead>
                {% for i in values %}
                <tr>
                    <th>{{ i }}</th>
                    <th>Info</th>
                </tr>
                {% endfor %}
            </table>
        {% endfor %}
    </section-->

    <section>
        <!-- button onclick="showElementDetails(JSON.stringify({{ element }}))">Test!</button-->
        <h1>My Library</h1>
        {% for elem, values in elems.items() %}
        <div class="cards_landscape_wrap-2">
            <div class="container">
                <h1 class="fw-light">My {{ elem }}</h1>
                <div class="row">
                    {% for i in values %}
                    <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 albums">
                        <!-- MUST PASS AN OBJECT WITH ['duration', 'copyright', 'genre', 'release_date', 'stage_name', 'bio', 'creator']
                         AS KEYS (NOT NECESSARY ALL, AT LEAST ONE)
                         TODO REVIEW JINJIA ARGUMENTS -->
                        <!--<a style="cursor: pointer;" onclick="showElementDetails(JSON.stringify({{ get_title(i.id) }}))">-->
                            <meta class="repr" data-name="{{ i.__repr__() }}" >
                            <a class="details" style="cursor: pointer;">
                            <div class="card-flyer">
                                <div class="text-box">
                                    <div class="image-box img-conver">
                                        <!-- Image can be generated from the name
                                                in img.alt must be the title song/artist name -->
                                        <img src="" alt="{{ get_title(i.id) }}" />
                                    </div>
                                    <div class="text-container">
                                        <h6>
                                            {% if elem != 'artists' %}
                                                {{ get_title(i.id) }}
                                            {% else %}
                                                {{ i }}
                                            {% endif %}
                                        </h6>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </section>



</body>

    <script>

        window.onload = function () {
            var divs = document.querySelectorAll(".img-conver");
            for (const div of divs) {
                var img = div.children[0];
                var s = img.alt;
                img.src = convertStringToImageUrl(s);
            }

            showElementDetails()
        }

    </script>
{% endblock %}
